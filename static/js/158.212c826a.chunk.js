"use strict";(self.webpackChunk_30poems=self.webpackChunk_30poems||[]).push([[158],{7142:function(e,t,r){r.d(t,{M:function(){return f}});var n=r(1413),a=r(6807),i=r(829),o=r(4165),s=r(5861),c="https://en.wikipedia.org/w/api.php?action=query&origin=*&prop=pageprops&format=json&titles=";function u(){return(u=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(c+t).then((function(e){return e.json()})).then((function(e){var t=Object.keys(e.query.pages)[0],r=e.query.pages[t].pageprops;if(""!==(null===r||void 0===r?void 0:r.disambiguation))return{wikipediaPageId:t,imageName:null===r||void 0===r?void 0:r.page_image_free,authorDescription:null===r||void 0===r?void 0:r["wikibase-shortdesc"],wikidataId:null===r||void 0===r?void 0:r.wikibase_item}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=r(5671),d=r(3144),p=function(){function e(t,r){(0,l.Z)(this,e),this.name=void 0,this.meta=void 0,this.name=t,this.meta=r}return(0,d.Z)(e,[{key:"prepareNameForWikipediaQuery",value:function(){var e=this.name.split(" ");return(e=e.map((function(e){return e[0].toUpperCase()+e.slice(1)}))).join("_")}}]),e}(),m=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://poetrydb.org/random/30").then((function(e){return e.json()}));case 2:return t=e.sent,e.abrupt("return",t.map((function(e,t){return(0,n.Z)((0,n.Z)({},e),{},{id:t,author:new p(e.author)})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.a)(["poems"],m),t=e.data,r=e.isLoading,o=e.isError,s=null===t||void 0===t?void 0:t.map((function(e){return{queryKey:["author",e.author.name],queryFn:function(){return function(e){return u.apply(this,arguments)}(e.author.prepareNameForWikipediaQuery())},enabled:!!t}})),c=(0,i.h)({queries:null!==s&&void 0!==s?s:[]}),l=t&&c.map((function(e,r){return(0,n.Z)((0,n.Z)({},t[r]),{},{author:new p(t[r].author.name,e.data)})})),d=c.some((function(e){return e.isLoading}));return{data:null!==l&&void 0!==l?l:t,isLoading:r||d,isError:o}}},7764:function(e,t,r){r.d(t,{Y:function(){return n}});var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return"".concat("https://commons.wikimedia.org/w/thumb.php?f=").concat(e).concat("&w=").concat(t)}},9158:function(e,t,r){r.r(t),r.d(t,{default:function(){return L}});var n=r(7689),a=r(1087),i=r(7823),o=r(3009),s=r(9773),c=r(8459),u=r(3464),l=r(8318),d=r(9037),p=r(4448),m=r(2791),f=r(2007),h=r.n(f),v=r(1694),g=r.n(v),j=r(9622),w=["className","cssModule","tag"];function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}function b(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var k={className:h().string,cssModule:h().object,tag:j.iC};function y(e){var t=e.className,r=e.cssModule,n=e.tag,a=void 0===n?"div":n,i=b(e,w),o=(0,j.mx)(g()(t,"card-subtitle"),r);return m.createElement(a,x({},i,{className:o}))}y.propTypes=k;var N=y,Z=r(5485),O=r(7764),_={card:"AuthorCard_card__oX0n5",image:"AuthorCard_image__k6HtF"},C=r(184),E=function(e){var t,r,n,a,i,o=e.author;return(0,C.jsxs)(u.Z,{className:"h-100 ".concat(_.card),children:[(0,C.jsx)(l.Z,{className:_.image,top:!0,src:null!==(t=o.meta)&&void 0!==t&&t.imageName?(0,O.Y)(o.meta.imageName):Z,loading:"lazy",alt:o.name}),(0,C.jsxs)(d.Z,{children:[(0,C.jsx)(p.Z,{tag:"h3",children:o.name}),(null===(r=o.meta)||void 0===r?void 0:r.authorDescription)&&(0,C.jsx)(N,{className:_.overflow,children:null===(n=o.meta)||void 0===n?void 0:n.authorDescription}),(null===(a=o.meta)||void 0===a?void 0:a.wikipediaPageId)&&(0,C.jsx)("a",{href:"https://en.wikipedia.org/w/index.php?curid=".concat(o.meta.wikipediaPageId),target:"_blank",rel:"noreferrer",className:"d-block",children:"Vedi su Wikipedia"}),(null===(i=o.meta)||void 0===i?void 0:i.wikidataId)&&(0,C.jsx)("a",{href:"https://www.wikidata.org/entity/".concat(o.meta.wikidataId),target:"_blank",rel:"noreferrer",className:"d-block",children:"Guarda dati su wikidata"})]})]})},I=r(9439),M=function(e){var t=e.collapsed,r=e.onClick;return(0,C.jsx)("button",{className:"btn btn-link text-primary ps-0",onClick:r,children:t?"Mostra tutto":"Mostra meno"})},q=function(e){var t=e.poem,r=(0,m.useState)(!0),n=(0,I.Z)(r,2),a=n[0],i=n[1],o=t.lines.map((function(e){return(0,C.jsx)("p",{children:e},e.slice(0,6))})),s=o.filter((function(e,t){return t<5})),c=o.length>5;return(0,m.useEffect)((function(){i(!0)}),[t]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"overflow-scroll",style:{maxHeight:"500px"},children:[(0,C.jsx)("h1",{className:"mb-3",children:t.title}),a?s:o]}),c&&(0,C.jsx)(M,{collapsed:a,onClick:function(){return i(!a)}}),a?"(".concat(t.linecount," versi)"):""]})},F=function(e){var t=e.poem;return(0,C.jsxs)(i.Z,{className:"p-3",children:[(0,C.jsxs)(o.Z,{className:"justify-content-between align-items-start",children:[(0,C.jsx)(s.Z,{sm:!0,className:"text-start",children:(0,C.jsx)(q,{poem:t})}),(0,C.jsx)(s.Z,{md:!0,className:"mt-3 d-flex justify-content-center justify-content-sm-end",children:(0,C.jsx)(E,{author:t.author})})]}),(0,C.jsx)("div",{className:"text-center mt-3",children:(0,C.jsx)(a.rU,{to:c.Ok.poems.id(t.id+1===30?t.id:t.id+1),className:"btn btn-outline-primary",children:"Cambia"})})]})},P=r(7142);var L=function(){var e=(0,P.M)(),t=e.data,r=e.isLoading,a=e.isError,i=(0,n.UO)().id;if(!i||Number.isNaN(parseInt(i)))throw Error("invalid parameter");var o=parseInt(i);if(r)return(0,C.jsx)(C.Fragment,{children:"isLoading..."});if(a||!t)throw new Error;var s=t.find((function(e){return e.id===o}));if(!s)throw new Error;return(0,C.jsx)(F,{poem:s})}},5485:function(e,t,r){e.exports=r.p+"static/media/missing.9265c3e628d3a2416c1a.jpg"}}]);
//# sourceMappingURL=158.212c826a.chunk.js.map