"use strict";(self.webpackChunk_30poems=self.webpackChunk_30poems||[]).push([[923],{7142:function(e,n,r){r.d(n,{M:function(){return f}});var t=r(1413),a=r(6807),i=r(829),s=r(4165),o=r(5861),c="https://en.wikipedia.org/w/api.php?action=query&origin=*&prop=pageprops&format=json&titles=";function l(){return(l=(0,o.Z)((0,s.Z)().mark((function e(n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(c+n).then((function(e){return e.json()})).then((function(e){var n=Object.keys(e.query.pages)[0],r=e.query.pages[n].pageprops;if(""!==(null===r||void 0===r?void 0:r.disambiguation))return{wikipediaPageId:n,imageName:null===r||void 0===r?void 0:r.page_image_free,authorDescription:null===r||void 0===r?void 0:r["wikibase-shortdesc"],wikidataId:null===r||void 0===r?void 0:r.wikibase_item}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u=r(5671),d=r(3144),p=function(){function e(n,r){(0,u.Z)(this,e),this.name=void 0,this.meta=void 0,this.name=n,this.meta=r}return(0,d.Z)(e,[{key:"prepareNameForWikipediaQuery",value:function(){var e=this.name.split(" ");return(e=e.map((function(e){return e[0].toUpperCase()+e.slice(1)}))).join("_")}}]),e}(),m=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://poetrydb.org/random/30").then((function(e){return e.json()}));case 2:return n=e.sent,e.abrupt("return",n.map((function(e,n){return(0,t.Z)((0,t.Z)({},e),{},{id:n,author:new p(e.author)})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,a.a)(["poems"],m),n=e.data,r=e.isLoading,s=e.isError,o=null===n||void 0===n?void 0:n.map((function(e){return{queryKey:["author",e.author.name],queryFn:function(){return function(e){return l.apply(this,arguments)}(e.author.prepareNameForWikipediaQuery())},enabled:!!n}})),c=(0,i.h)({queries:null!==o&&void 0!==o?o:[]}),u=n&&c.map((function(e,r){return(0,t.Z)((0,t.Z)({},n[r]),{},{author:new p(n[r].author.name,e.data)})})),d=c.some((function(e){return e.isLoading}));return{data:null!==u&&void 0!==u?u:n,isLoading:r||d,isError:s}}},7764:function(e,n,r){r.d(n,{Y:function(){return t}});var t=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return"".concat("https://commons.wikimedia.org/w/thumb.php?f=").concat(e).concat("&w=").concat(n)}},5923:function(e,n,r){r.r(n),r.d(n,{default:function(){return B}});var t=r(3433),a=r(9439),i=r(2791),s=r(7823),o=r(3009),c=r(9773),l=r(184);var u=function(e){var n=e.cards,r=e.col,t=void 0===r?{xs:1,sm:2,md:3,lg:4,xl:5}:r;return(0,l.jsx)(o.Z,{className:"\n        row-cols-".concat(t.xs,"\n        row-cols-sm-").concat(t.sm,"\n        row-cols-md-").concat(t.md,"\n        row-cols-lg-").concat(t.lg,"\n        row-cols-xl-").concat(t.xl,"\n        "),children:n.map((function(e){return(0,l.jsx)(c.Z,{className:"pb-3",children:e},e.key)}))})},d="Switch_switch__SYlzl",p="Switch_option__PnCr2",m="Switch_active__w4orK",f=function(e){var n=e.isSwitched,r=e.onChange,t=e.options;return(0,l.jsxs)("div",{className:d,children:[(0,l.jsxs)("label",{className:"".concat(p," ").concat(n?m:null),children:[(0,l.jsx)("input",{onClick:r}),(0,l.jsxs)("span",{children:[" ",t[0]]})]}),(0,l.jsxs)("label",{className:"".concat(p," ").concat(n?null:m),children:[(0,l.jsx)("input",{onClick:r}),(0,l.jsx)("span",{children:t[1]})]})]})},h=r(5853),v=r(2007),b=r.n(v),g=r(1694),j=r.n(g),x=r(9622),y=["className","cssModule","color","innerRef","pill","tag"];function w(){return w=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},w.apply(this,arguments)}function O(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var N={children:b().node,className:b().string,color:b().string,cssModule:b().object,innerRef:b().oneOfType([b().object,b().func,b().string]),pill:b().bool,tag:x.iC};function Z(e){var n=e.className,r=e.cssModule,t=e.color,a=void 0===t?"secondary":t,s=e.innerRef,o=e.pill,c=void 0!==o&&o,l=e.tag,u=void 0===l?"span":l,d=O(e,y),p=(0,x.mx)(j()(n,"badge","bg-"+a,!!c&&"rounded-pill"),r);return d.href&&"span"===u&&(u="a"),i.createElement(u,w({},d,{className:p,ref:s}))}Z.propTypes=N;var k=Z,_=function(e){var n=e.text,r=e.isActive,t=e.onClick;return(0,l.jsx)(k,{pill:!0,className:"me-1 mb-1 ".concat(r?"bg-primary":""),style:{cursor:"pointer"},onClick:t,children:n})},C=function(e){var n=e.data,r=e.activeFilters,t=e.onChange,s=(0,i.useState)(!1),o=(0,a.Z)(s,2),c=o[0],u=o[1],d=Array.from(new Set(n.map((function(e){return e.author.name})))).sort().map((function(e){return(0,l.jsx)(_,{text:e,isActive:r.includes(e),onClick:function(){return t(e)}},e)}));return(0,l.jsxs)("div",{children:[(0,l.jsxs)("button",{className:"btn btn-link text-primary ps-0",onClick:function(){return u(!c)},children:["Filtri",(0,l.jsx)("i",{className:"ms-1 bi-caret-right"})]}),(0,l.jsx)(h.Z,{isOpen:c,children:d})]})},S=r(1087),P=r(3464),M=r(8318),T=r(9037),E=r(4448),F=r(8645),q=r(5485),L=r(7764),z="PoemCard_image__5Ucq+",I="PoemCard_overflow__MF3S3";var R=function(e){var n,r=e.poem;return(0,l.jsxs)(P.Z,{className:"h-100 text-dark",children:[(0,l.jsx)(M.Z,{className:z,top:!0,src:null!==(n=r.author.meta)&&void 0!==n&&n.imageName?(0,L.Y)(r.author.meta.imageName):q,loading:"lazy",alt:r.author.name}),(0,l.jsxs)(T.Z,{className:"d-flex flex-column justify-content-end text-centered",children:[(0,l.jsx)(E.Z,{className:"".concat(I," small-caps fs-6 text-primary"),children:r.author.name}),(0,l.jsx)(F.Z,{className:I,children:r.title}),(0,l.jsx)(S.rU,{className:"btn btn-primary",to:"/poems/".concat(r.id),children:"Leggi poesia"})]})]})},A=r(8755),Y={image:"PoemsTable_image__By+28"},U=function(e){var n,r=e.poem;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:r.id}),(0,l.jsx)("td",{className:Y.image,children:(0,l.jsx)("img",{src:null!==(n=r.author.meta)&&void 0!==n&&n.imageName?(0,L.Y)(r.author.meta.imageName):q,alt:r.author.name,loading:"lazy"})}),(0,l.jsx)("td",{children:r.author.name}),(0,l.jsx)("td",{children:r.title}),(0,l.jsx)("td",{children:(0,l.jsx)(S.OL,{className:Y.action,to:"/poems/".concat(r.id),children:"Leggi poesia"})})]},r.id)};var K=function(e){var n=e.data.map((function(e){return(0,l.jsx)(U,{poem:e},e.id)}));return(0,l.jsxs)(A.Z,{responsive:!0,borderless:!0,children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"#"}),(0,l.jsx)("th",{children:"Image"}),(0,l.jsx)("th",{children:"Author"}),(0,l.jsx)("th",{children:"Title"})]})}),(0,l.jsx)("tbody",{children:n})]})},Q=function(e){var n=e.data,r=(0,i.useState)(!0),d=(0,a.Z)(r,2),p=d[0],m=d[1],h=(0,i.useState)([]),v=(0,a.Z)(h,2),b=v[0],g=v[1],j=(0,i.useMemo)((function(){return 0!==b.length?n.filter((function(e){return b.includes(e.author.name)})):n}),[b,n]);return(0,l.jsxs)(s.Z,{children:[(0,l.jsx)(o.Z,{className:"justify-content-center",children:(0,l.jsx)(c.Z,{children:(0,l.jsx)(f,{isSwitched:p,onChange:function(){return m(!p)},options:["Grid","Table"]})})}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Z,{className:"mb-5",children:(0,l.jsx)(c.Z,{children:(0,l.jsx)(C,{data:n,activeFilters:b,onChange:function(e){g((function(n){return n.includes(e)?n.filter((function(n){return n!==e})):[].concat((0,t.Z)(n),[e])}))}})})}),(0,l.jsx)(o.Z,{className:"justify-content-center",children:(0,l.jsx)(c.Z,{children:p?(0,l.jsx)(u,{cards:null===j||void 0===j?void 0:j.map((function(e){return(0,l.jsx)(R,{poem:e},e.id)}))}):(0,l.jsx)(K,{data:j})})})]})]})},W=r(7142);var B=function(){var e=(0,W.M)(),n=e.data,r=e.isLoading,t=e.isError;if(r)return(0,l.jsx)(l.Fragment,{children:"loading"});if(t||!n)throw new Error;return(0,l.jsx)(Q,{data:n})}},8645:function(e,n,r){var t=r(2791),a=r(2007),i=r.n(a),s=r(1694),o=r.n(s),c=r(9622),l=["className","cssModule","tag"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},u.apply(this,arguments)}function d(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var p={className:i().string,cssModule:i().object,tag:c.iC};function m(e){var n=e.className,r=e.cssModule,a=e.tag,i=void 0===a?"p":a,s=d(e,l),p=(0,c.mx)(o()(n,"card-text"),r);return t.createElement(i,u({},s,{className:p}))}m.propTypes=p,n.Z=m},8755:function(e,n,r){var t=r(2791),a=r(2007),i=r.n(a),s=r(1694),o=r.n(s),c=r(9622),l=["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"];function u(){return u=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},u.apply(this,arguments)}function d(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var p={bordered:i().bool,borderless:i().bool,className:i().string,cssModule:i().object,dark:i().bool,hover:i().bool,innerRef:i().oneOfType([i().func,i().string,i().object]),responsive:i().oneOfType([i().bool,i().string]),responsiveTag:c.iC,size:i().string,striped:i().bool,tag:c.iC};function m(e){var n=e.className,r=e.cssModule,a=e.size,i=e.bordered,s=e.borderless,p=e.striped,m=e.dark,f=e.hover,h=e.responsive,v=e.tag,b=void 0===v?"table":v,g=e.responsiveTag,j=void 0===g?"div":g,x=e.innerRef,y=d(e,l),w=(0,c.mx)(o()(n,"table",!!a&&"table-"+a,!!i&&"table-bordered",!!s&&"table-borderless",!!p&&"table-striped",!!m&&"table-dark",!!f&&"table-hover"),r),O=t.createElement(b,u({},y,{ref:x,className:w}));if(h){var N=(0,c.mx)(!0===h?"table-responsive":"table-responsive-".concat(h),r);return t.createElement(j,{className:N},O)}return O}m.propTypes=p,n.Z=m},5485:function(e,n,r){e.exports=r.p+"static/media/missing.9265c3e628d3a2416c1a.jpg"}}]);
//# sourceMappingURL=923.41fbb016.chunk.js.map